// Prisma schema for Supabase PostgreSQL

datasource db {
  provider  = "postgresql"
  url       = env("DATABASE_URL")
  directUrl = env("DIRECT_URL")
}

generator client {
  provider = "prisma-client-js"
}

model User {
  id            String     @id @default(cuid())
  name          String?
  email         String     @unique
  password      String
  role          Int        @default(0)
  avatar        String?
  slot          Slot?
  therapist     Therapist?
  orders        Order[]
  createdAt     DateTime   @default(now())
  updatedAt     DateTime   @updatedAt
}

model Therapist {
  id                String     @id @default(cuid())
  user              User       @relation(fields: [userId], references: [id])
  userId            String     @unique
  degree            String?
  area              String[]
  yearOfExp         Int?
  languages         String[]
  aboutTherapist    String?
  rating            Int?
  googleCalendarId  String?
  createdAt         DateTime   @default(now())
  updatedAt         DateTime   @updatedAt
}

model Slot {
  id            String     @id @default(cuid())
  timing        String[]
  user          User       @relation(fields: [userId], references: [id])
  userId        String     @unique
  createdAt     DateTime   @default(now())
  updatedAt     DateTime   @updatedAt   
}

model Order {
  id               String    @id @default(cuid())
  amount           Int
  currency         String    @default("usd")
  status           String    @default("pending")
  serviceType      String  
  sessionStart     DateTime
  sessionEnd       DateTime
  therapist        User      @relation(fields: [therapistId], references: [id])
  therapistId      String
  stripeSessionId  String?   @unique
  customerEmail    String?
  customerName     String? 
  createdAt        DateTime  @default(now())
  updatedAt        DateTime  @updatedAt
}
